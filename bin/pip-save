#!/bin/bash

if [ -z "$VIRTUAL_ENV" ]; then
  echo "This command works from virtual environment only!"
  exit 1
fi

for pkg in $@; do
    pip install "$pkg" && {
        name="$(pip show "$pkg" | grep Name: | awk '{print $2}')";
        version="$(pip show "$pkg" | grep Version: | awk '{print $2}')";
        echo "${name}==${version}" >> requirements.txt;
    }
done
